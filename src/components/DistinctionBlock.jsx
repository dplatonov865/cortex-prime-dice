import React from 'react';
import DiceIcon from './DiceIcon';

const DistinctionBlock = ({ distinctions, onDistinctionClick, onDistinctionChange, isCategoryAvailable, additionalDieEffect = false }) => {
  const handleDistinctionClick = (distinctionName, diceType, category) => {
    if (isCategoryAvailable && !isCategoryAvailable('distinction') && !additionalDieEffect) {
      return;
    }
    onDistinctionClick(distinctionName, diceType, category);
  };

  const handleNameChange = (category, newName) => {
    onDistinctionChange(category, newName);
  };

  const isBlockAvailable = isCategoryAvailable ? isCategoryAvailable('distinction') : true;
  const finalAvailability = isBlockAvailable || additionalDieEffect;

  return (
    <div className={`block distinctions-block ${!finalAvailability ? 'category-used' : ''} ${additionalDieEffect ? 'bonus-mode' : ''}`}>
      <h3>–û—Ç–ª–∏—á–∏—è</h3>
      <div className="distinctions-list">
        {Object.entries(distinctions).map(([category, distinction]) => (
          <div key={category} className="distinction-category">
            <h4 className="distinction-title">{getCategoryTitle(category)}</h4>
            <div className={`distinction-row ${!finalAvailability ? 'row-disabled' : ''}`}>
              <select
                className="distinction-select"
                value={distinction.name}
                onChange={(e) => handleNameChange(category, e.target.value)}
                disabled={!finalAvailability}
              >
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ {getCategoryTitle(category).toLowerCase()}...</option>
                {getCategoryOptions(category).map(option => (
                  <option key={option.value} value={option.value}>
                    {option.label}
                  </option>
                ))}
              </select>

              <div className="distinction-dice">
                <div
                  className={`distinction-dice-item ${!finalAvailability ? 'dice-disabled' : ''}`}
                  onClick={() => handleDistinctionClick(
                    distinction.name,
                    'd8',
                    `${getCategoryTitle(category)} (d8)`
                  )}
                  title={
                    !finalAvailability
                      ? '–£–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ç–ª–∏—á–∏–µ –∏–∑ —ç—Ç–æ–≥–æ –Ω–∞–±–æ—Ä–∞'
                      : additionalDieEffect
                        ? '–≠—Ñ—Ñ–µ–∫—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫—É–±–∞: –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –ø—É–ª'
                        : '–ö–ª–∏–∫ —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å d8 –≤ –ø—É–ª'
                  }
                >
                  <DiceIcon
                    type="d8"
                    value="8"
                    clickable={finalAvailability}
                  />
                </div>

                <div
                  className={`distinction-dice-item ${!finalAvailability ? 'dice-disabled' : ''}`}
                  onClick={() => handleDistinctionClick(
                    distinction.name,
                    'd4',
                    `${getCategoryTitle(category)} (d4)`
                  )}
                  title={
                    !finalAvailability
                      ? '–£–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ç–ª–∏—á–∏–µ –∏–∑ —ç—Ç–æ–≥–æ –Ω–∞–±–æ—Ä–∞'
                      : additionalDieEffect
                        ? '–≠—Ñ—Ñ–µ–∫—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫—É–±–∞: –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –ø—É–ª'
                        : '–ö–ª–∏–∫ —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å d4 –≤ –ø—É–ª'
                  }
                >
                  <DiceIcon
                    type="d4"
                    value="4"
                    clickable={finalAvailability}
                  />
                </div>
              </div>
            </div>
          </div>
        ))}
      </div>
      <div className="distinction-hint">
        {additionalDieEffect
          ? 'üéØ –≠—Ñ—Ñ–µ–∫—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫—É–±–∞: –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª—é–±–æ–µ –æ—Ç–ª–∏—á–∏–µ'
          : !isBlockAvailable
            ? '‚ö° –û—Ç–ª–∏—á–∏–µ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—É–ª–µ'
            : 'üí° –í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–ª–∏—á–∏—Ç–µ–ª—å–Ω—ã–µ —á–µ—Ä—Ç—ã –∏–∑ —Å–ø–∏—Å–∫–∞ –∏ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –∫—É–±—ã –≤ –ø—É–ª'
        }
      </div>
    </div>
  );
};

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
const getCategoryTitle = (category) => {
  const titles = {
    'past': '–ü–µ—Ä–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ',
    'trait': '–í—Ç–æ—Ä–æ–µ –æ—Ç–ª–∏—á–∏–µ',
    'value': '–¢—Ä–µ—Ç—å–µ –æ—Ç–ª–∏—á–∏–µ'
  };
  return titles[category] || category;
};

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤—ã–±–æ—Ä–∞ –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
const getCategoryOptions = (category) => {
  const options = {
    'past': [
      { 'value': '–ó–¥–æ—Ä–æ–≤—è–∫', 'label': '–ó–¥–æ—Ä–æ–≤—è–∫' },
      { 'value': '–ú–Ω–æ–≥–æ–±–æ—Ä–µ—Ü', 'label': '–ú–Ω–æ–≥–æ–±–æ—Ä–µ—Ü' },
      { 'value': '–ü—Ä–æ–Ω—ã—Ä–∞', 'label': '–ü—Ä–æ–Ω—ã—Ä–∞' },
      { 'value': '–°–æ—Ä–≤–∏–≥–æ–ª–æ–≤–∞', 'label': '–°–æ—Ä–≤–∏–≥–æ–ª–æ–≤–∞' },
      { 'value': '–ó–æ–ª–æ—Ç—ã–µ —Ä—É–∫–∏', 'label': '–ó–æ–ª–æ—Ç—ã–µ —Ä—É–∫–∏' },
      { 'value': '–ù–∞–∏–≤–Ω—ã–π –∏–¥–µ–∞–ª–∏—Å—Ç', 'label': '–ù–∞–∏–≤–Ω—ã–π –∏–¥–µ–∞–ª–∏—Å—Ç' },
      { 'value': '–ü—Ä–æ–∂–∂—ë–Ω–Ω—ã–π —Ü–∏–Ω–∏–∫', 'label': '–ü—Ä–æ–∂–∂—ë–Ω–Ω—ã–π —Ü–∏–Ω–∏–∫' },
      { 'value': '–ö—Ä–µ—Å—Ç–æ–Ω–æ—Å–µ—Ü', 'label': '–ö—Ä–µ—Å—Ç–æ–Ω–æ—Å–µ—Ü' },
      { 'value': '–ò—Å—Ç–∏–Ω–Ω–æ –≤–µ—Ä—É—é—â–∏–π', 'label': '–ò—Å—Ç–∏–Ω–Ω–æ –≤–µ—Ä—É—é—â–∏–π' },
      { 'value': '–ò—Å–∫–∞—Ç–µ–ª—å –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–π', 'label': '–ò—Å–∫–∞—Ç–µ–ª—å –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–π' },
      { 'value': '–£–±–µ–∂–¥—ë–Ω–Ω—ã–π —Å–∫–µ–ø—Ç–∏–∫', 'label': '–£–±–µ–∂–¥—ë–Ω–Ω—ã–π —Å–∫–µ–ø—Ç–∏–∫' },
      { 'value': '–°—ã—â–∏–∫-–ª—é–±–∏—Ç–µ–ª—å', 'label': '–°—ã—â–∏–∫-–ª—é–±–∏—Ç–µ–ª—å' },
      { 'value': '–î–∏–ª–µ—Ç–∞–Ω—Ç', 'label': '–î–∏–ª–µ—Ç–∞–Ω—Ç' },
      { 'value': '–†–∞—Å—Å–µ—è–Ω–Ω—ã–π –ø—Ä–æ—Ñ–µ—Å—Å–æ—Ä', 'label': '–†–∞—Å—Å–µ—è–Ω–Ω—ã–π –ø—Ä–æ—Ñ–µ—Å—Å–æ—Ä' },
      { 'value': '–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫', 'label': '–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫' },
      { 'value': '–î—É—à–∞ –∫–æ–º–ø–∞–Ω–∏–∏', 'label': '–î—É—à–∞ –∫–æ–º–ø–∞–Ω–∏–∏' },
      { 'value': '–ü—Ä–∏—Ä–æ–∂–¥—ë–Ω–Ω—ã–π –∞—Ä—Ç–∏—Å—Ç', 'label': '–ü—Ä–∏—Ä–æ–∂–¥—ë–Ω–Ω—ã–π –∞—Ä—Ç–∏—Å—Ç' },
      { 'value': '–ö—É–∫–ª–æ–≤–æ–¥', 'label': '–ö—É–∫–ª–æ–≤–æ–¥' },
      { 'value': '–ù–∞—Å—Ç–∞–≤–Ω–∏–∫', 'label': '–ù–∞—Å—Ç–∞–≤–Ω–∏–∫' },
      { 'value': '–ë—Ä—É—Ç–∞–ª—å–Ω—ã–π', 'label': '–ë—Ä—É—Ç–∞–ª—å–Ω—ã–π' },
      { 'value': '–í–∏–¥—è—â–∏–π –¥—É—Ö–æ–≤', 'label': '–í–∏–¥—è—â–∏–π –¥—É—Ö–æ–≤' },
      { 'value': '–î—å—è–≤–æ–ª—å—Å–∫–∏ –≤–µ–∑—É—á–∏–π', 'label': '–î—å—è–≤–æ–ª—å—Å–∫–∏ –≤–µ–∑—É—á–∏–π' },
      { 'value': '–ü—Ä–æ–≤–∏–¥–µ—Ü', 'label': '–ü—Ä–æ–≤–∏–¥–µ—Ü' },
      { 'value': '–°–Ω–æ–≤–∏–¥–µ—Ü', 'label': '–°–Ω–æ–≤–∏–¥–µ—Ü' },
      { 'value': '–û—Ç–º–µ—á–µ–Ω–Ω—ã–π —Å—É–¥—å–±–æ–π', 'label': '–û—Ç–º–µ—á–µ–Ω–Ω—ã–π —Å—É–¥—å–±–æ–π' }
    ],
    'trait': [
      { 'value': '–ó–¥–æ—Ä–æ–≤—è–∫', 'label': '–ó–¥–æ—Ä–æ–≤—è–∫' },
      { 'value': '–ú–Ω–æ–≥–æ–±–æ—Ä–µ—Ü', 'label': '–ú–Ω–æ–≥–æ–±–æ—Ä–µ—Ü' },
      { 'value': '–ü—Ä–æ–Ω—ã—Ä–∞', 'label': '–ü—Ä–æ–Ω—ã—Ä–∞' },
      { 'value': '–°–æ—Ä–≤–∏–≥–æ–ª–æ–≤–∞', 'label': '–°–æ—Ä–≤–∏–≥–æ–ª–æ–≤–∞' },
      { 'value': '–ó–æ–ª–æ—Ç—ã–µ —Ä—É–∫–∏', 'label': '–ó–æ–ª–æ—Ç—ã–µ —Ä—É–∫–∏' },
      { 'value': '–ù–∞–∏–≤–Ω—ã–π –∏–¥–µ–∞–ª–∏—Å—Ç', 'label': '–ù–∞–∏–≤–Ω—ã–π –∏–¥–µ–∞–ª–∏—Å—Ç' },
      { 'value': '–ü—Ä–æ–∂–∂—ë–Ω–Ω—ã–π —Ü–∏–Ω–∏–∫', 'label': '–ü—Ä–æ–∂–∂—ë–Ω–Ω—ã–π —Ü–∏–Ω–∏–∫' },
      { 'value': '–ö—Ä–µ—Å—Ç–æ–Ω–æ—Å–µ—Ü', 'label': '–ö—Ä–µ—Å—Ç–æ–Ω–æ—Å–µ—Ü' },
      { 'value': '–ò—Å—Ç–∏–Ω–Ω–æ –≤–µ—Ä—É—é—â–∏–π', 'label': '–ò—Å—Ç–∏–Ω–Ω–æ –≤–µ—Ä—É—é—â–∏–π' },
      { 'value': '–ò—Å–∫–∞—Ç–µ–ª—å –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–π', 'label': '–ò—Å–∫–∞—Ç–µ–ª—å –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–π' },
      { 'value': '–£–±–µ–∂–¥—ë–Ω–Ω—ã–π —Å–∫–µ–ø—Ç–∏–∫', 'label': '–£–±–µ–∂–¥—ë–Ω–Ω—ã–π —Å–∫–µ–ø—Ç–∏–∫' },
      { 'value': '–°—ã—â–∏–∫-–ª—é–±–∏—Ç–µ–ª—å', 'label': '–°—ã—â–∏–∫-–ª—é–±–∏—Ç–µ–ª—å' },
      { 'value': '–î–∏–ª–µ—Ç–∞–Ω—Ç', 'label': '–î–∏–ª–µ—Ç–∞–Ω—Ç' },
      { 'value': '–†–∞—Å—Å–µ—è–Ω–Ω—ã–π –ø—Ä–æ—Ñ–µ—Å—Å–æ—Ä', 'label': '–†–∞—Å—Å–µ—è–Ω–Ω—ã–π –ø—Ä–æ—Ñ–µ—Å—Å–æ—Ä' },
      { 'value': '–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫', 'label': '–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫' },
      { 'value': '–î—É—à–∞ –∫–æ–º–ø–∞–Ω–∏–∏', 'label': '–î—É—à–∞ –∫–æ–º–ø–∞–Ω–∏–∏' },
      { 'value': '–ü—Ä–∏—Ä–æ–∂–¥—ë–Ω–Ω—ã–π –∞—Ä—Ç–∏—Å—Ç', 'label': '–ü—Ä–∏—Ä–æ–∂–¥—ë–Ω–Ω—ã–π –∞—Ä—Ç–∏—Å—Ç' },
      { 'value': '–ö—É–∫–ª–æ–≤–æ–¥', 'label': '–ö—É–∫–ª–æ–≤–æ–¥' },
      { 'value': '–ù–∞—Å—Ç–∞–≤–Ω–∏–∫', 'label': '–ù–∞—Å—Ç–∞–≤–Ω–∏–∫' },
      { 'value': '–ë—Ä—É—Ç–∞–ª—å–Ω—ã–π', 'label': '–ë—Ä—É—Ç–∞–ª—å–Ω—ã–π' },
      { 'value': '–í–∏–¥—è—â–∏–π –¥—É—Ö–æ–≤', 'label': '–í–∏–¥—è—â–∏–π –¥—É—Ö–æ–≤' },
      { 'value': '–î—å—è–≤–æ–ª—å—Å–∫–∏ –≤–µ–∑—É—á–∏–π', 'label': '–î—å—è–≤–æ–ª—å—Å–∫–∏ –≤–µ–∑—É—á–∏–π' },
      { 'value': '–ü—Ä–æ–≤–∏–¥–µ—Ü', 'label': '–ü—Ä–æ–≤–∏–¥–µ—Ü' },
      { 'value': '–°–Ω–æ–≤–∏–¥–µ—Ü', 'label': '–°–Ω–æ–≤–∏–¥–µ—Ü' },
      { 'value': '–û—Ç–º–µ—á–µ–Ω–Ω—ã–π —Å—É–¥—å–±–æ–π', 'label': '–û—Ç–º–µ—á–µ–Ω–Ω—ã–π —Å—É–¥—å–±–æ–π' }
    ],
    'value': [
      { 'value': '–ó–¥–æ—Ä–æ–≤—è–∫', 'label': '–ó–¥–æ—Ä–æ–≤—è–∫' },
      { 'value': '–ú–Ω–æ–≥–æ–±–æ—Ä–µ—Ü', 'label': '–ú–Ω–æ–≥–æ–±–æ—Ä–µ—Ü' },
      { 'value': '–ü—Ä–æ–Ω—ã—Ä–∞', 'label': '–ü—Ä–æ–Ω—ã—Ä–∞' },
      { 'value': '–°–æ—Ä–≤–∏–≥–æ–ª–æ–≤–∞', 'label': '–°–æ—Ä–≤–∏–≥–æ–ª–æ–≤–∞' },
      { 'value': '–ó–æ–ª–æ—Ç—ã–µ —Ä—É–∫–∏', 'label': '–ó–æ–ª–æ—Ç—ã–µ —Ä—É–∫–∏' },
      { 'value': '–ù–∞–∏–≤–Ω—ã–π –∏–¥–µ–∞–ª–∏—Å—Ç', 'label': '–ù–∞–∏–≤–Ω—ã–π –∏–¥–µ–∞–ª–∏—Å—Ç' },
      { 'value': '–ü—Ä–æ–∂–∂—ë–Ω–Ω—ã–π —Ü–∏–Ω–∏–∫', 'label': '–ü—Ä–æ–∂–∂—ë–Ω–Ω—ã–π —Ü–∏–Ω–∏–∫' },
      { 'value': '–ö—Ä–µ—Å—Ç–æ–Ω–æ—Å–µ—Ü', 'label': '–ö—Ä–µ—Å—Ç–æ–Ω–æ—Å–µ—Ü' },
      { 'value': '–ò—Å—Ç–∏–Ω–Ω–æ –≤–µ—Ä—É—é—â–∏–π', 'label': '–ò—Å—Ç–∏–Ω–Ω–æ –≤–µ—Ä—É—é—â–∏–π' },
      { 'value': '–ò—Å–∫–∞—Ç–µ–ª—å –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–π', 'label': '–ò—Å–∫–∞—Ç–µ–ª—å –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–π' },
      { 'value': '–£–±–µ–∂–¥—ë–Ω–Ω—ã–π —Å–∫–µ–ø—Ç–∏–∫', 'label': '–£–±–µ–∂–¥—ë–Ω–Ω—ã–π —Å–∫–µ–ø—Ç–∏–∫' },
      { 'value': '–°—ã—â–∏–∫-–ª—é–±–∏—Ç–µ–ª—å', 'label': '–°—ã—â–∏–∫-–ª—é–±–∏—Ç–µ–ª—å' },
      { 'value': '–î–∏–ª–µ—Ç–∞–Ω—Ç', 'label': '–î–∏–ª–µ—Ç–∞–Ω—Ç' },
      { 'value': '–†–∞—Å—Å–µ—è–Ω–Ω—ã–π –ø—Ä–æ—Ñ–µ—Å—Å–æ—Ä', 'label': '–†–∞—Å—Å–µ—è–Ω–Ω—ã–π –ø—Ä–æ—Ñ–µ—Å—Å–æ—Ä' },
      { 'value': '–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫', 'label': '–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫' },
      { 'value': '–î—É—à–∞ –∫–æ–º–ø–∞–Ω–∏–∏', 'label': '–î—É—à–∞ –∫–æ–º–ø–∞–Ω–∏–∏' },
      { 'value': '–ü—Ä–∏—Ä–æ–∂–¥—ë–Ω–Ω—ã–π –∞—Ä—Ç–∏—Å—Ç', 'label': '–ü—Ä–∏—Ä–æ–∂–¥—ë–Ω–Ω—ã–π –∞—Ä—Ç–∏—Å—Ç' },
      { 'value': '–ö—É–∫–ª–æ–≤–æ–¥', 'label': '–ö—É–∫–ª–æ–≤–æ–¥' },
      { 'value': '–ù–∞—Å—Ç–∞–≤–Ω–∏–∫', 'label': '–ù–∞—Å—Ç–∞–≤–Ω–∏–∫' },
      { 'value': '–ë—Ä—É—Ç–∞–ª—å–Ω—ã–π', 'label': '–ë—Ä—É—Ç–∞–ª—å–Ω—ã–π' },
      { 'value': '–í–∏–¥—è—â–∏–π –¥—É—Ö–æ–≤', 'label': '–í–∏–¥—è—â–∏–π –¥—É—Ö–æ–≤' },
      { 'value': '–î—å—è–≤–æ–ª—å—Å–∫–∏ –≤–µ–∑—É—á–∏–π', 'label': '–î—å—è–≤–æ–ª—å—Å–∫–∏ –≤–µ–∑—É—á–∏–π' },
      { 'value': '–ü—Ä–æ–≤–∏–¥–µ—Ü', 'label': '–ü—Ä–æ–≤–∏–¥–µ—Ü' },
      { 'value': '–°–Ω–æ–≤–∏–¥–µ—Ü', 'label': '–°–Ω–æ–≤–∏–¥–µ—Ü' },
      { 'value': '–û—Ç–º–µ—á–µ–Ω–Ω—ã–π —Å—É–¥—å–±–æ–π', 'label': '–û—Ç–º–µ—á–µ–Ω–Ω—ã–π —Å—É–¥—å–±–æ–π' }
    ]
  };

  return options[category] || [];
};

export default DistinctionBlock;